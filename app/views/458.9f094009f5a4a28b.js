"use strict";(self.webpackChunkdrDolittle=self.webpackChunkdrDolittle||[]).push([[458],{1458:(Tt,v,c)=>{c.r(v),c.d(v,{AdlistModule:()=>Ot});var d=c(9808),l=c(5644),C=c(9841),A=c(5577),t=c(4893),h=c(8103),p=c(8204);let x=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-spinner"]],decls:2,vars:0,consts:[[1,"lds-dual-ring"],["src","/assets/logo_notext.svg","alt",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"img",1),t.qZA())},styles:['.lds-dual-ring[_ngcontent-%COMP%], .lds-dual-ring[_ngcontent-%COMP%]:after{box-sizing:border-box}.lds-dual-ring[_ngcontent-%COMP%]{display:inline-block;width:300px;height:300px;position:relative}.lds-dual-ring[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:80%}.lds-dual-ring[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;color:var(--color-link-default);top:0%;left:-2%;width:250px;height:250px;border-radius:50%;border:15px solid currentColor;border-color:currentColor transparent currentColor transparent;animation:lds-dual-ring 1.2s linear infinite}@keyframes lds-dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),n})();var I=c(3581);function F(n,i){1&n&&(t.TgZ(0,"div",2),t._UZ(1,"app-spinner"),t.qZA())}function E(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).handleEdit()}),t._uU(2,"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u044f"),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).openDialog()}),t._uU(4,"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435"),t.qZA()()}}function U(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"confirm-dialog",11),t.NdJ("dialogResolution",function(u){return t.CHM(e),t.oxw(2).handleDialog(u)}),t.qZA()}}function N(n,i){if(1&n&&(t.TgZ(0,"div",3)(1,"div",4),t._UZ(2,"img",5),t.qZA(),t.TgZ(3,"div",6)(4,"h2"),t._uU(5),t.qZA(),t.TgZ(6,"p"),t._uU(7),t.qZA(),t.TgZ(8,"p")(9,"span"),t._uU(10,"\u0417\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0438:"),t.qZA(),t._uU(11),t.qZA(),t.TgZ(12,"p")(13,"span"),t._uU(14,"\u0442\u0435\u043b.:"),t.qZA(),t._uU(15),t.qZA(),t.TgZ(16,"p")(17,"span"),t._uU(18,"e-mail:"),t.qZA(),t._uU(19),t.qZA(),t.TgZ(20,"p")(21,"span"),t._uU(22,"\u0421\u044a\u0437\u0434\u0430\u0434\u0435\u043d\u0430:"),t.qZA(),t._uU(23),t.ALo(24,"date"),t.qZA(),t.TgZ(25,"p")(26,"span"),t._uU(27,"\u041e\u0431\u043d\u043e\u0432\u0435\u043d\u0430:"),t.qZA(),t._uU(28),t.ALo(29,"date"),t.qZA(),t.YNc(30,E,5,0,"div",7),t.YNc(31,U,1,0,"confirm-dialog",8),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.s9C("src",e.currentAd.adImage,t.LSH),t.xp6(3),t.Oqu(e.currentAd.category),t.xp6(2),t.Oqu(e.currentAd.description),t.xp6(4),t.hij(" ",e.currentAd.contactName,""),t.xp6(4),t.hij(" ",e.currentAd.contactPhone,""),t.xp6(4),t.hij(" ",e.currentAd.contactEmail||"\u043d\u0435 \u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0435\u043d",""),t.xp6(4),t.hij(" ",t.xi3(24,10,e.currentAd.createdAt,"d MMMM yyyy \u0433."),""),t.xp6(5),t.hij(" ",t.xi3(29,13,e.currentAd.updatedAt,"d MMMM yyyy \u0433."),""),t.xp6(2),t.Q6J("ngIf",e.isAdmin||e.isOwner||e.isModerator),t.xp6(1),t.Q6J("ngIf",e.showDialog)}}let q=(()=>{class n{constructor(e,o,u,r){this.adService=e,this.tokenService=o,this.activatedRoute=u,this.router=r,this.showDialog=!1,this.confirmation=!1,this.isOwner=!1,this.isAdmin=!1,this.isModerator=!1,this.isLoggedIn=this.tokenService.isLoggedIn$}ngOnInit(){(0,C.a)([this.activatedRoute.params.pipe((0,A.z)(e=>this.adService.getAdById(e.adId))),this.tokenService.currentUser$]).subscribe(([e,o])=>{this.currentAd=e,o&&(this.currentUser=o,this.isAdmin=o.roles.includes("ROLE_ADMIN"),this.isModerator=o.roles.includes("ROLE_MODERATOR"),this.isOwner=this.currentUser.id===this.currentAd.owner)})}handleEdit(){this.router.navigate([`/adlist/edit/${this.currentAd._id}`])}openDialog(){this.showDialog=!0}handleDialog(e){"yes"===e?(this.showDialog=!1,this.adService.deleteAd(this.currentAd._id).subscribe({next:()=>this.router.navigate(["/adlist"])})):"cancel"===e&&(this.showDialog=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.F),t.Y36(p.i),t.Y36(l.gz),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-pad-detail"]],decls:2,vars:2,consts:[["class","loader",4,"ngIf"],["class","ad-data",4,"ngIf"],[1,"loader"],[1,"ad-data"],[1,"img-container"],["alt","ad-image",3,"src"],[1,"data-container"],["class","buttons",4,"ngIf"],["message","\u0421\u0438\u0433\u0443\u0440\u043d\u0438 \u043b\u0438 \u0441\u0442\u0435, \u0447\u0435 \u0438\u0441\u043a\u0430\u0442\u0435 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u043e\u0431\u044f\u0432\u0430\u0442\u0430?",3,"dialogResolution",4,"ngIf"],[1,"buttons"],[3,"click"],["message","\u0421\u0438\u0433\u0443\u0440\u043d\u0438 \u043b\u0438 \u0441\u0442\u0435, \u0447\u0435 \u0438\u0441\u043a\u0430\u0442\u0435 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u043e\u0431\u044f\u0432\u0430\u0442\u0430?",3,"dialogResolution"]],template:function(e,o){1&e&&(t.YNc(0,F,2,0,"div",0),t.YNc(1,N,32,16,"div",1)),2&e&&(t.Q6J("ngIf",!o.currentAd),t.xp6(1),t.Q6J("ngIf",o.currentAd))},directives:[d.O5,x,I.$],pipes:[d.uU],styles:['.loader[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;align-items:center;justify-content:center}.ad-data[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;margin:2em;background-color:var(--color-cards-bgrd);border-radius:var(--border-radius);padding:2em 1em}.img-container[_ngcontent-%COMP%]{width:30%;border:1px dashed black;box-shadow:inset 0 0 0 1rem #fff;object-fit:cover;overflow:hidden;margin:5em 1em 1em;display:flex;align-items:center;justify-content:center}.img-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%;height:auto}.data-container[_ngcontent-%COMP%]{margin-left:3em}.data-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:inline-block;font-weight:700;font-size:2.5em;position:relative;margin:1.5em 0}.data-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{position:absolute;content:"";background-color:var(--color-link-default);width:100%;height:.2em;top:100%;left:0}.data-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em}.data-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.buttons[_ngcontent-%COMP%]{display:flex;gap:1rem}button[_ngcontent-%COMP%]{background-color:var(--color-link-default);border:none;border-radius:var(--border-radius);color:#fff;font-size:1em;padding:1em 2em}button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--color-link-hover)}.dialog-component-container[_ngcontent-%COMP%]{position:relative}@media (max-width: 1024px){.ad-data[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 900px){.img-container[_ngcontent-%COMP%]{width:70%;margin:2rem auto}}@media (max-width: 480px){.ad-data[_ngcontent-%COMP%]{margin:0;padding:0}.data-container[_ngcontent-%COMP%]{margin:0 auto}.buttons[_ngcontent-%COMP%]{flex-direction:column;align-items:center;justify-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}}']}),n})();var a=c(2382);class k{static checkPhoneNumber(i){return e=>{var o;const u=e.get(i);return/^08\d{8}$/.test(null==u?void 0:u.value)?null:(null===(o=e.get(i))||void 0===o||o.setErrors({nrInvalid:!0}),{nrInvalid:!0})}}}var J=c(5698),D=c(8306);const M=1048576;let Q=(()=>{class n{compress(e){const o=e.type||"image/jpeg",u=new FileReader;return u.readAsDataURL(e),D.y.create(r=>{u.onload=s=>{const g=this.createImage(s),Z=g.width>g.height?g.width:g.height;let T=Z>700?700/Z:1,Zt=e.size>M?M/e.size:.9;g.onload=()=>{const _=document.createElement("canvas");_.width=g.width*T,_.height=g.height*T;const w=_.getContext("2d");w.drawImage(g,0,0,_.width,_.height),w.canvas.toBlob(y=>{y&&r.next(new File([y],e.name,{type:o,lastModified:Date.now()}))},o,Zt)}},u.onerror=s=>r.error(s)})}createImage(e){let o=e.target.result;const u=new Image;return u.src=o,u}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z(n,i){1&n&&(t.TgZ(0,"h2"),t._uU(1,"\u041f\u0443\u0431\u043b\u0438\u043a\u0443\u0432\u0430\u043d\u0435 \u043d\u0430 \u043e\u0431\u044f\u0432\u0430"),t.qZA())}function B(n,i){1&n&&(t.TgZ(0,"h2"),t._uU(1,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u043d\u0435 \u043d\u0430 \u043e\u0431\u044f\u0432\u0430"),t.qZA())}function j(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"\u041c\u043e\u043b\u044f \u0438\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u043e\u0442 \u043c\u0435\u043d\u044e\u0442\u043e!"),t.qZA())}function R(n,i){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,j,2,0,"div",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.category.errors.required)}}function H(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u0442\u043e \u0435 \u043c\u0435\u0436\u0434\u0443 10 \u0438 500 \u0441\u0438\u043c\u0432\u043e\u043b\u0430."),t.qZA())}function $(n,i){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,H,2,0,"div",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.description.errors.minlength||e.f.description.errors.maxlength)}}function X(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"\u041c\u043e\u043b\u044f \u0432\u044a\u0432\u0435\u0434\u0435\u0442\u0435 \u043b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442!"),t.qZA())}function G(n,i){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,X,2,0,"div",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.contactName.errors.required)}}function K(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"\u041d\u0435\u0432\u0430\u043b\u0438\u0434\u0435\u043d email \u0430\u0434\u0440\u0435\u0441!"),t.qZA())}function V(n,i){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,K,2,0,"div",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.contactEmail.errors.email)}}function W(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"\u041d\u043e\u043c\u0435\u0440\u044a\u0442 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043f\u043e\u0447\u0432\u0430 \u0441 08 \u0438 \u0434\u0430 \u0435 \u043e\u0431\u0449\u043e 10 \u0441\u0438\u043c\u0432\u043e\u043b\u0430."),t.qZA())}function tt(n,i){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,W,2,0,"div",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.contactPhone.errors.nrInvalid)}}function et(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",25),t._UZ(1,"img",26),t.TgZ(2,"button",27),t.NdJ("click",function(u){return t.CHM(e),t.oxw().removeImage(u)}),t._uU(3,"\u041f\u0440\u0435\u043c\u0430\u0445\u043d\u0435\u0442\u0435 \u0441\u043d\u0438\u043c\u043a\u0430\u0442\u0430"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.localImgUrl,t.LSH)}}function nt(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"\u0421\u043d\u0438\u043c\u043a\u0430\u0442\u0430 \u0442\u0440\u044f\u0431\u0432\u0430 \u0434\u0430 \u0435 \u0442\u0438\u043f img \u0438\u043b\u0438 png."),t.qZA())}function ot(n,i){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,nt,2,0,"div",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.f.adImage.errors.requiredFileType)}}const f=function(n){return{"input-error":n}};let P=(()=>{class n{constructor(e,o){this.formBuilder=e,this.compressImage=o,this.dataCollected=new t.vpe}ngOnInit(){this.form=this.formBuilder.group({category:[this.currentAd.category,[a.kI.required]],description:[this.currentAd.description,[a.kI.minLength(10),a.kI.maxLength(500)]],contactName:[this.currentAd.contactName,[a.kI.required]],contactPhone:[this.currentAd.contactPhone],contactEmail:[this.currentAd.contactEmail,[a.kI.email]],adImage:[null,[function(n){const i=n.value;if(i){const e=i.split(".")[1].trim().toLowerCase();return"png"!==e&&"jpg"!==e?(n.setErrors({requiredFileType:!0}),{requiredFileType:!0}):null}return null}]]},{validators:[k.checkPhoneNumber("contactPhone")]}),this.localImgUrl=this.currentAd.adImage}get f(){return this.form.controls}onFileSelect(e){let u=e.target.files;u.length>0&&this.compressImage.compress(u[0]).pipe((0,J.q)(1)).subscribe(s=>{console.log(`Image size after compression ${s.size} bytes.`),this.file=s})}onSubmitButtonPressed(){const e=this.form.value,o=new FormData,u=this.currentUser.id;o.append("category",e.category),o.append("description",e.description),o.append("contactPhone",e.contactPhone),o.append("contactEmail",e.contactEmail),o.append("contactName",e.contactName),o.append("adImage",this.file),o.append("owner",u),this.dataCollected.emit(o)}removeImage(e){e.preventDefault(),this.file=null,this.localImgUrl=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.qu),t.Y36(Q))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ad-form"]],inputs:{currentAd:"currentAd",currentUser:"currentUser",viewMode:"viewMode"},outputs:{dataCollected:"dataCollected"},decls:43,vars:26,consts:[[1,"wrapper"],[1,"ad-form",3,"formGroup","ngSubmit"],[1,"heading"],[4,"ngIf"],["for","category"],["formControlName","category",3,"ngClass"],["selected","","value",""],["value","\u0422\u044a\u0440\u0441\u044f"],["value","\u041f\u0440\u043e\u0434\u0430\u0432\u0430\u043c"],["value","\u041f\u043e\u0434\u0430\u0440\u044f\u0432\u0430\u043c"],["class","error",4,"ngIf"],["for","description"],["formControlName","description","rows","5","cols","10",3,"ngClass"],["for","contactName"],["type","text","formControlName","contactName","placeholder","\u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432",3,"ngClass"],["for","email"],["type","email","formControlName","contactEmail","placeholder","ivan@abv.bg",3,"ngClass"],["for","contactPhone"],["type","text","formControlName","contactPhone","placeholder","0888888888",3,"ngClass"],[1,"file"],["for","adImage"],["type","file","formControlName","adImage","title","",3,"change"],["class","selected-file",4,"ngIf"],[1,"ad-btn",3,"disabled"],[1,"error"],[1,"selected-file"],[3,"src"],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("ngSubmit",function(){return o.onSubmitButtonPressed()}),t.TgZ(2,"div",2),t.YNc(3,z,2,0,"h2",3),t.YNc(4,B,2,0,"h2",3),t.qZA(),t.TgZ(5,"label",4),t._uU(6,"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f*:"),t.qZA(),t.TgZ(7,"select",5),t._uU(8," > "),t.TgZ(9,"option",6),t._uU(10,"\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043e\u0442:"),t.qZA(),t.TgZ(11,"option",7),t._uU(12,"\u0422\u044a\u0440\u0441\u044f"),t.qZA(),t.TgZ(13,"option",8),t._uU(14,"\u041f\u0440\u043e\u0434\u0430\u0432\u0430\u043c"),t.qZA(),t.TgZ(15,"option",9),t._uU(16,"\u041f\u043e\u0434\u0430\u0440\u044f\u0432\u0430\u043c"),t.qZA()(),t.YNc(17,R,2,1,"div",10),t.TgZ(18,"label",11),t._uU(19,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435*:"),t.qZA(),t.TgZ(20,"textarea",12),t._uU(21,"        >"),t.qZA(),t.YNc(22,$,2,1,"div",10),t.TgZ(23,"label",13),t._uU(24,"\u041b\u0438\u0446\u0435 \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442*:"),t.qZA(),t._UZ(25,"input",14),t.YNc(26,G,2,1,"div",10),t.TgZ(27,"label",15),t._uU(28,"E-mail:"),t.qZA(),t._UZ(29,"input",16),t.YNc(30,V,2,1,"div",10),t.TgZ(31,"label",17),t._uU(32,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d \u0437\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442*:"),t.qZA(),t._UZ(33,"input",18),t.YNc(34,tt,2,1,"div",10),t.TgZ(35,"div",19)(36,"label",20),t._uU(37," \u0414\u043e\u0431\u0430\u0432\u0435\u0442\u0435 \u0441\u043d\u0438\u043c\u043a\u0430 "),t.qZA(),t.TgZ(38,"input",21),t.NdJ("change",function(r){return o.onFileSelect(r)}),t.qZA()(),t.YNc(39,et,4,1,"div",22),t.YNc(40,ot,2,1,"div",10),t.TgZ(41,"button",23),t._uU(42," \u041f\u0443\u0431\u043b\u0438\u043a\u0443\u0432\u0430\u043d\u0435 "),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(2),t.Q6J("ngIf","new"===o.viewMode),t.xp6(1),t.Q6J("ngIf","edit"===o.viewMode),t.xp6(3),t.Q6J("ngClass",t.VKq(16,f,o.f.category.touched&&o.f.category.invalid)),t.xp6(10),t.Q6J("ngIf",o.f.category.touched&&o.f.category.errors),t.xp6(3),t.Q6J("ngClass",t.VKq(18,f,o.f.description.touched&&o.f.description.invalid)),t.xp6(2),t.Q6J("ngIf",o.f.description.touched&&o.f.description.errors),t.xp6(3),t.Q6J("ngClass",t.VKq(20,f,o.f.contactName.touched&&o.f.contactName.invalid)),t.xp6(1),t.Q6J("ngIf",o.f.contactName.touched&&o.f.contactName.errors),t.xp6(3),t.Q6J("ngClass",t.VKq(22,f,o.f.contactEmail.touched&&o.f.contactEmail.invalid)),t.xp6(1),t.Q6J("ngIf",o.f.contactEmail.touched&&o.f.contactEmail.errors),t.xp6(3),t.Q6J("ngClass",t.VKq(24,f,o.f.contactPhone.touched&&o.f.contactPhone.invalid)),t.xp6(1),t.Q6J("ngIf",o.f.contactPhone.touched&&o.f.contactPhone.errors),t.xp6(5),t.Q6J("ngIf",o.localImgUrl),t.xp6(1),t.Q6J("ngIf",o.f.adImage.touched&&o.f.adImage.errors),t.xp6(1),t.Q6J("disabled",o.form.invalid))},directives:[a._Y,a.JL,a.sg,d.O5,a.EJ,a.JJ,a.u,d.mk,a.YN,a.Kr,a.Fj],styles:['.wrapper[_ngcontent-%COMP%]{width:80vw;display:flex;align-items:center;justify-content:center;margin-top:2em}.ad-form[_ngcontent-%COMP%]{padding:2em;border:none;border-radius:.4em;box-shadow:3px 5px 9px -4px #07004d;width:90%}.ad-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:inline-block;font-weight:700;position:relative}.ad-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:after{position:absolute;content:"";top:100%;left:0;background-color:var(--color-link-default);width:100%;height:.2em}.ad-form[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{border:none}.ad-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .ad-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .ad-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:none;border-radius:.4em;background-color:#07004d1a;padding:.2em;resize:none}.file[_ngcontent-%COMP%]{position:relative;width:100%;height:50px;margin-top:2em;border-radius:var(--border-radius)}.file[_ngcontent-%COMP%]:hover{cursor:pointer;opacity:.8}.file[_ngcontent-%COMP%] > input[type=file][_ngcontent-%COMP%]{position:absolute;opacity:0;top:0;left:0;right:0;bottom:0;cursor:pointer}.file[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{position:absolute;top:0;right:0;left:0;bottom:0;background-color:var(--color-link-default);color:#fff;border-radius:5px;line-height:30px;text-align:center;padding-top:.5em}.selected-file[_ngcontent-%COMP%]{margin-top:1em;display:flex;align-items:center;gap:1em}.selected-file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:auto;border-radius:var(--border-radius)}.selected-file[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;border-radius:var(--border-radius);background-color:var(--color-link-default);color:#fff;padding:1em;font-size:.8em;height:3em}.selected-file[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{opacity:.8;cursor:pointer}.ad-btn[_ngcontent-%COMP%]{background-color:var(--color-link-default);width:100%;padding:1em 7em;color:#fff;border:none;border-radius:.4em;font-size:1.2em;margin:2em auto}.ad-btn[_ngcontent-%COMP%]:not([disabled]):hover{cursor:pointer;opacity:.8}.ad-btn[_ngcontent-%COMP%]:disabled{background-color:gray}.text-center[_ngcontent-%COMP%]{text-align:center;font-size:.8em}.text-center[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-link-default)}@media (max-width: 480px){.wrapper[_ngcontent-%COMP%]{width:100vw;margin:0}.ad-form[_ngcontent-%COMP%]{width:100%;box-shadow:unset}}']}),n})();function it(n,i){if(1&n&&(t.TgZ(0,"div",5)(1,"p"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.errorMessage)}}function ut(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"ad-form",6),t.NdJ("dataCollected",function(u){return t.CHM(e),t.oxw().onSubmit(u)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("currentAd",e.currentAd)("currentUser",e.currentUser)}}let rt=(()=>{class n{constructor(e,o,u,r){this.adService=e,this.activatedRoute=o,this.router=u,this.tokenService=r,this.isSuccessful=!1,this.isSubmitted=!1,this.errorMessage="",this.viewMode="edit"}ngOnInit(){(0,C.a)([this.activatedRoute.params.pipe((0,A.z)(e=>this.adService.getAdById(e.adId))),this.tokenService.currentUser$]).subscribe(([e,o])=>{o&&(this.currentUser=o,this.currentAd=e)})}onSubmit(e){this.adService.updateAd(this.currentAd._id,e).subscribe({next:o=>{this.isSubmitted=!0,400===o.status&&(this.isSuccessful=!1,this.errorMessage=o.error.message,setTimeout(()=>this.hideAlert(),2e3)),this.isSuccessful=!0,this.router.navigate(["/adlist"])},error:o=>{this.errorMessage=o.error.message,this.isSubmitted=!0,this.isSuccessful=!1,setTimeout(()=>this.hideAlert(),3e3)}})}hideAlert(){this.isSubmitted=!1,this.isSuccessful=!1,this.errorMessage=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.F),t.Y36(l.gz),t.Y36(l.F0),t.Y36(p.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-pad-edit"]],decls:5,vars:2,consts:[["id","ad-form-section"],[1,"wrapper"],["class","server-error",4,"ngIf"],[1,"ad-form-container"],[3,"currentAd","currentUser","dataCollected",4,"ngIf"],[1,"server-error"],[3,"currentAd","currentUser","dataCollected"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0)(1,"div",1),t.YNc(2,it,3,1,"div",2),t.TgZ(3,"div",3),t.YNc(4,ut,1,2,"ad-form",4),t.qZA()()()),2&e&&(t.xp6(2),t.Q6J("ngIf",o.isSubmitted&&!o.isSuccessful),t.xp6(2),t.Q6J("ngIf",o.currentAd))},directives:[d.O5,P],styles:[".ad-form-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]}),n})();var m=c(1777),at=c(4026);function ct(n,i){1&n&&(t.TgZ(0,"div",6),t._UZ(1,"app-spinner"),t.qZA())}function st(n,i){1&n&&(t.TgZ(0,"p"),t._uU(1,"\u041c\u043e\u0438\u0442\u0435 \u043e\u0431\u044f\u0432\u0438"),t.qZA())}function dt(n,i){1&n&&(t.TgZ(0,"p"),t._uU(1,"\u0412\u0441\u0438\u0447\u043a\u0438 \u043e\u0431\u044f\u0432\u0438"),t.qZA())}function lt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",7)(1,"button",8)(2,"a",9),t._uU(3," \u041f\u0443\u0431\u043b\u0438\u043a\u0443\u0432\u0430\u0439 \u043d\u043e\u0432\u0430 \u043e\u0431\u044f\u0432\u0430 "),t.qZA()(),t.TgZ(4,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().showMyAds()}),t.YNc(5,st,2,0,"p",11),t.YNc(6,dt,2,0,"p",11),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngIf",!e.userId),t.xp6(1),t.Q6J("ngIf",e.userId)}}function gt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"select",13),t.NdJ("ngModelChange",function(u){return t.CHM(e),t.oxw().category=u}),t.TgZ(2,"option",14),t._uU(3,"\u0418\u0437\u0431\u0435\u0440\u0435\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f:"),t.qZA(),t.TgZ(4,"option",15),t._uU(5,"\u0422\u044a\u0440\u0441\u044f"),t.qZA(),t.TgZ(6,"option",16),t._uU(7,"\u041f\u043e\u0434\u0430\u0440\u044f\u0432\u0430\u043c"),t.qZA(),t.TgZ(8,"option",17),t._uU(9,"\u041f\u0440\u043e\u0434\u0430\u0432\u0430\u043c"),t.qZA()(),t.TgZ(10,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw().searchCategory()}),t.TgZ(11,"p"),t._uU(12," \u0424\u0438\u043b\u0442\u044a\u0440 \u043f\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f "),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngModel",e.category)}}function mt(n,i){1&n&&t._UZ(0,"ad-item",23),2&n&&t.Q6J("ad",i.$implicit)}function pt(n,i){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,mt,1,1,"ad-item",22),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("@adItemAnimation",void 0),t.xp6(1),t.Q6J("ngForOf",e.adList)}}function ft(n,i){if(1&n&&(t.TgZ(0,"div",19)(1,"h1"),t._uU(2,"\u041e\u0431\u044f\u0432\u0438 \u0437\u0430 \u0434\u043e\u043c\u0430\u0448\u043d\u0438 \u043b\u044e\u0431\u0438\u043c\u0446\u0438"),t.qZA(),t.YNc(3,pt,2,2,"div",20),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.adList.length>0)}}function _t(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"li",27),t.NdJ("click",function(u){return t.CHM(e),t.oxw(2).gotoPage(u)}),t._uU(1),t.qZA()}if(2&n){const e=i.$implicit,o=t.oxw(2);t.ekj("highlighted",e===o.page-1),t.xp6(1),t.hij(" ",e+1," ")}}function ht(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().gotoPrev()}),t._uU(2,"\u041f\u0440\u0435\u0434\u0438\u0448\u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"),t.qZA(),t.TgZ(3,"ul"),t.YNc(4,_t,2,3,"li",26),t.qZA(),t.TgZ(5,"button",25),t.NdJ("click",function(){return t.CHM(e),t.oxw().gotoNext()}),t._uU(6,"\u0421\u043b\u0435\u0434\u0432\u0430\u0449\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",1===e.page),t.xp6(3),t.Q6J("ngForOf",e.totPages),t.xp6(1),t.Q6J("disabled",e.page>=e.totPages.length)}}let vt=(()=>{class n{constructor(e,o,u){this.adService=e,this.router=o,this.tokenStorageService=u,this.isLoggedIn$=this.tokenStorageService.isLoggedIn$,this.category="",this.page=1,this.count=0,this.totPages=[0],this.pageSize=6,this.userId=""}ngOnInit(){this.retrievePaginatedAds()}gotoNew(){this.router.navigate(["/adlist/new"])}getRequestParams(e,o,u,r){let s={};return e&&(s.category=e),o&&(s.page=o-1),u&&(s.size=u),r&&(s.owner=r),s}retrievePaginatedAds(){const e=this.getRequestParams(this.category,this.page,this.pageSize,this.userId);this.adService.getAllAds(e).subscribe({next:o=>{const{Ads:u,totalItems:r,totalPages:s}=o;this.adList=u,this.count=r,this.totPages=Array.from(Array(s).keys())},error:o=>{console.error(o)}})}gotoPage(e){this.page=Number(e.target.innerText),this.retrievePaginatedAds()}gotoPrev(){this.page-=1,this.retrievePaginatedAds()}gotoNext(){this.page+=1,this.retrievePaginatedAds()}removeAllAds(){this.adService.deleteAll().subscribe({next:e=>{this.retrievePaginatedAds()},error:e=>console.error(e)})}searchCategory(){this.page=1,this.retrievePaginatedAds()}showMyAds(){const e=this.tokenStorageService.getUser();this.userId=this.userId?"":e.id,this.retrievePaginatedAds()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.F),t.Y36(l.F0),t.Y36(p.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-pad-list"]],decls:7,vars:7,consts:[[1,"ads-dashboard"],["class","loader",4,"ngIf"],["class","add-new",4,"ngIf"],["class","search-group",4,"ngIf"],["class","ad-list",4,"ngIf"],["class","pagination",4,"ngIf"],[1,"loader"],[1,"add-new"],[1,"add-new-ad"],["routerLink","/adlist/new"],[1,"my-ads-btn",3,"click"],[4,"ngIf"],[1,"search-group"],[3,"ngModel","ngModelChange"],["selected","","value",""],["value","\u0422\u044a\u0440\u0441\u044f"],["value","\u041f\u043e\u0434\u0430\u0440\u044f\u0432\u0430\u043c"],["value","\u041f\u0440\u043e\u0434\u0430\u0432\u0430\u043c"],["type","button",1,"search-btn",3,"click"],[1,"ad-list"],["class","ad-list-items",4,"ngIf"],[1,"ad-list-items"],["class","ad-item",3,"ad",4,"ngFor","ngForOf"],[1,"ad-item",3,"ad"],[1,"pagination"],[3,"disabled","click"],[3,"highlighted","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,ct,2,0,"div",1),t.YNc(2,lt,7,2,"div",2),t.ALo(3,"async"),t.YNc(4,gt,13,1,"div",3),t.YNc(5,ft,4,1,"div",4),t.YNc(6,ht,7,3,"div",5),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",!o.adList),t.xp6(1),t.Q6J("ngIf",t.lcZ(3,5,o.isLoggedIn$)),t.xp6(2),t.Q6J("ngIf",o.adList&&o.adList.length>0),t.xp6(1),t.Q6J("ngIf",o.adList&&o.adList.length>0),t.xp6(1),t.Q6J("ngIf",o.adList&&o.adList.length>0))},directives:[d.O5,x,l.yS,a.EJ,a.JJ,a.On,a.YN,a.Kr,d.sg,at.F],pipes:[d.Ov],styles:[".ads-dashboard[_ngcontent-%COMP%]{position:relative;z-index:0;display:flex;flex-direction:column;align-items:center}.search-group[_ngcontent-%COMP%]{display:flex;margin:3em 0 2em;justify-content:center;align-items:center}.search-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:300px;height:50px;margin:1em;padding:.5em 1em}.search-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;height:50px;border-radius:var(--border-radius);background-color:var(--color-link-default);font-size:1em;color:#fff;padding:0 5em}.search-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--color-link-hover)}.search-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0}.add-new[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around}.add-new[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;color:#fff;font-size:2em;margin:5em 2em;text-align:center}.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#040447;color:#fff;border:none;border-radius:var(--border-radius);font-size:1em;margin-top:5em;padding:1em}.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#29295c}.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:2em;padding:0 2em}button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:2em}.ad-list[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:block;width:80%;margin:0 auto;text-align:center;border-bottom:.15em solid var(--color-link-default)}.ad-list-items[_ngcontent-%COMP%]{margin:0 auto;width:80vw;display:grid;grid-template-columns:repeat(auto-fill,minmax(400px,1fr));grid-gap:1em;gap:1em;align-items:center}.pagination[_ngcontent-%COMP%]{margin:1em auto;display:flex;align-items:center;justify-content:center}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1em;border:none;padding:1em;background-color:#fff}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#d3d3d3}.pagination[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex}.pagination[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-decoration:none;list-style-type:none;margin:0 .2em;padding:1em}.pagination[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{cursor:pointer}.highlighted[_ngcontent-%COMP%]{background:var(--color-link-default)}@media (max-width: 600px){.search-group[_ngcontent-%COMP%]{flex-direction:column-reverse;font-size:1.5rem;margin:1rem auto}.search-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0 3.2rem}.add-new[_ngcontent-%COMP%]{position:relative;z-index:-10;width:100%;flex-direction:column}.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90%;margin:.5rem auto}.add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .add-new[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5rem}ad-item[_ngcontent-%COMP%]{max-width:320px}}"],data:{animation:[(0,m.X$)("adItemAnimation",[(0,m.eR)(":enter",[(0,m.IO)(".ad-item",[(0,m.oB)({opacity:0,transform:"translateY(-100px)"}),(0,m.EY)(300,[(0,m.jt)("1000ms cubic-bezier(0.35, 0, 0.25, 1)",(0,m.oB)({opacity:1,transform:"none"}))])])])])]}}),n})();function Ct(n,i){if(1&n&&(t.TgZ(0,"div",4)(1,"p"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.errorMessage)}}let At=(()=>{class n{constructor(e,o,u){this.adService=e,this.router=o,this.tokenService=u,this.isSuccessful=!1,this.isSubmitted=!1,this.errorMessage="",this.viewMode="new",this.currentAd={_id:"",category:"",description:"",contactName:"",contactPhone:"",contactEmail:"",owner:"",adImage:"",createdAt:new Date,updatedAt:new Date}}ngOnInit(){this.tokenService.currentUser$.subscribe({next:e=>{e&&(this.currentUser=e)}})}onSubmit(e){this.adService.createAd(e).subscribe({next:o=>{this.isSubmitted=!0,400===o.status&&(this.isSuccessful=!1,this.errorMessage=o.error.message,setTimeout(()=>this.hideAlert(),2e3)),this.isSuccessful=!0,this.router.navigate(["/adlist"])},error:o=>{this.errorMessage=o.error.message,this.isSubmitted=!0,this.isSuccessful=!1,setTimeout(()=>this.hideAlert(),3e3)}})}hideAlert(){this.isSubmitted=!1,this.isSuccessful=!1,this.errorMessage=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.F),t.Y36(l.F0),t.Y36(p.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-pad-new"]],decls:4,vars:3,consts:[["id","ad-form-section"],["class","server-error",4,"ngIf"],[1,"ad-form-container"],[3,"currentAd","currentUser","dataCollected"],[1,"server-error"]],template:function(e,o){1&e&&(t.TgZ(0,"section",0),t.YNc(1,Ct,3,1,"div",1),t.TgZ(2,"div",2)(3,"ad-form",3),t.NdJ("dataCollected",function(r){return o.onSubmit(r)}),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.isSubmitted&&!o.isSuccessful),t.xp6(2),t.Q6J("currentAd",o.currentAd)("currentUser",o.currentUser))},directives:[d.O5,P],styles:[".ad-form-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:5em}@media (max-width: 480px){.ad-form-container[_ngcontent-%COMP%]{padding:0}}"]}),n})(),O=(()=>{class n{constructor(e,o){this.tokenService=e,this.router=o}canActivate(e){return!!this.tokenService.getUser()||(this.router.navigate(["/adlist"]),!1)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(p.i),t.LFG(l.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Mt=l.Bz.forChild([{path:"",pathMatch:"full",component:vt},{path:"new",canActivate:[O],component:At},{path:"edit/:adId",canActivate:[O],component:rt},{path:":adId",component:q}]);var bt=c(3928),Pt=c(5349);let Ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[d.ez,Mt,a.UX,bt.I,a.u5,Pt.m]]}),n})()}}]);